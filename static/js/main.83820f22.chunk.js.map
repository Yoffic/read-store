{"version":3,"sources":["components/error-indicator/index.js","components/error-indicator/error-indicator.jsx","components/error-boundary/index.js","components/error-boundary/error-boundary.jsx","services/bookstore-service.js","components/bs-service-context/bs-service-context.jsx","components/main-header/index.js","components/main-header/main-header.jsx","components/hoc/with-bookstore-service.jsx","actions/index.js","components/book-list-item/index.js","components/book-list-item/book-list-item.jsx","components/spinner/index.js","components/spinner/spinner.jsx","components/book-list/book-list.jsx","components/book-list/index.js","utils/compose.js","components/pages/homepage.jsx","components/shopping-cart-table/shopping-cart-table.jsx","components/shopping-cart-table/index.js","components/pages/cartpage.jsx","components/app/index.js","components/app/app.jsx","reducers/bookslist.js","reducers/shopping-cart.js","reducers/index.js","store.js","index.js"],"names":["ErrorIndicator","fetchBooks","className","onClick","ErrorBoundary","props","state","hasError","this","setState","children","React","Component","BookstoreService","data","id","title","author","price","coverImage","Promise","resolve","rejected","setTimeout","Math","random","Error","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","MainHeader","connect","shoppingCart","itemsTotal","orderTotal","to","withBookstoreService","Wrapped","bookstoreService","addBookToCart","type","payload","dispatch","getBooks","then","catch","err","BookListItem","book","onAddToCart","src","alt","Spinner","role","BookList","books","map","key","functions","comp","reduceRight","wrapped","func","compose","booksList","loading","error","bindActionCreators","actions","useEffect","HomePage","createActions","onIncrease","onDecrease","onDelete","ShoppingCartTable","items","cartItems","total","scope","item","count","totalPrice","CartPage","App","basename","exact","path","component","updateBooksList","action","updateOrder","bookId","quantity","find","idx","findIndex","newCartItems","newItem","filter","slice","updatedCartItems","updateCartItem","newOrderTotal","reduce","sum","newItemsTotal","updateShoppingCart","reducer","store","createStore","applyMiddleware","thunkMiddleware","ReactDOM","render","value","document","getElementById"],"mappings":"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","file":"static/js/main.83820f22.chunk.js","sourcesContent":["import ErrorIndicator from './error-indicator';\n\nexport default ErrorIndicator;","import React from 'react';\n\nimport './error-indicator.css';\n\nconst ErrorIndicator = ({ fetchBooks }) => {\n  return (\n    <div className=\"card text-center error-indicator\">\n      <div className=\"card-body\">\n        <h5 className=\"card-title text-danger h4\">Ooops,</h5>\n        <p className=\"card-text\">Something went wrong. Let's try one more time</p>\n        <button className=\"btn btn-info mt-4\" onClick={fetchBooks}>Try Again</button>\n      </div>\n    </div>\n  );\n};\n\nexport default ErrorIndicator;","import ErrorBoundary from './error-boundary';\n\nexport default ErrorBoundary;","import React from 'react';\n\nimport ErrorIndicator from '../error-indicator';\n\nexport default class ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasError: false,\n    };\n  }\n\n  componentDidCatch() {\n    this.setState({ hasError: true });\n  }\n\n  render() {\n    const { hasError } = this.state;\n\n    return (\n      <>\n      {hasError && <ErrorIndicator />}\n      {!hasError && this.props.children}\n      </>\n    );\n  }\n};\n","\nexport default class BookstoreService {\n  data = [\n    {\n      id: 1,\n      title: 'Production-Ready Microservices',\n      author: 'Susan J. Fowler',\n      price: 32,\n      coverImage: 'https://images-na.ssl-images-amazon.com/images/I/41yJ75gpV-L._SX381_BO1,204,203,200_.jpg',\n    },\n    {\n      id: 2,\n      title: 'Release It!',\n      author: 'Michael T. Nygard',\n      price: 45,\n      coverImage: 'https://images-na.ssl-images-amazon.com/images/I/414CRjLjwgL._SX403_BO1,204,203,200_.jpg',\n    },\n    {\n      id: 3,\n      title: 'Eloquent JavaScript',\n      author: 'Marijn Haverbeke',\n      price: 25,\n      coverImage: 'https://images-na.ssl-images-amazon.com/images/I/51-5ZXYtcML._SX377_BO1,204,203,200_.jpg',\n    },\n    {\n      id: 4,\n      title: 'Code Complete',\n      author: 'Steve McConnell',\n      price: 30,\n      coverImage: 'https://images-na.ssl-images-amazon.com/images/I/514Fchkr9WL._SX408_BO1,204,203,200_.jpg',\n    },\n    {\n      id: 5,\n      title: 'The Linux Command Line',\n      author: 'William Shotts',\n      price: 26,\n      coverImage: 'https://images-na.ssl-images-amazon.com/images/I/51-T4ZwKduL._SX376_BO1,204,203,200_.jpg',\n    },\n    {\n      id: 6,\n      title: 'Docker: Up & Running',\n      author: 'Sean P. Kane',\n      price: 31,\n      coverImage: 'https://images-na.ssl-images-amazon.com/images/I/510qnZZj0sL._SX379_BO1,204,203,200_.jpg',\n    },\n  ];\n\n  getBooks() {\n    return new Promise((resolve, rejected) => {\n      setTimeout(() => {\n        if (Math.random() > 0.8) {\n          rejected(new Error(`Can't load data!`));\n        } else {\n          resolve(this.data);\n        }\n      }, 1000);\n    });\n  }\n}","import React from 'react';\n\nconst {\n  Provider: BookstoreServiceProvider,\n  Consumer: BookstoreServiceConsumer,\n} = React.createContext();\n\nexport {\n  BookstoreServiceProvider,\n  BookstoreServiceConsumer,\n};","import MainHeader from './main-header';\n\nexport default MainHeader;","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\n\nimport './main-header.css';\n\nconst mapStateToProps = ({ shoppingCart: { itemsTotal, orderTotal } }) => ({\n  itemsTotal,\n  orderTotal,\n});\n\nconst MainHeader = ({ itemsTotal, orderTotal }) => {\n  return (\n    <header className=\"main-header d-flex flex-column flex-md-row justify-content-between align-items-center\">\n      <Link to='/'>\n        <div className=\"logo\">ReadStore</div>\n      </Link>\n      <Link to='/cartpage'>\n        <div className=\"shopping-cart\">\n          <i className=\"cart-icon fa fa-shopping-cart\" />\n          {itemsTotal} items (${orderTotal})\n        </div>\n      </Link>\n    </header>\n  );\n};\n\nexport default connect(mapStateToProps, null)(MainHeader);","import React from 'react';\n\nimport { BookstoreServiceConsumer } from '../bs-service-context';\n\nconst withBookstoreService = () => (Wrapped) => {\n  return (props) => {\n    return (\n      <BookstoreServiceConsumer>\n        {(bookstoreService) => {\n          return <Wrapped {...props} bookstoreService={bookstoreService} />;\n        }}\n      </BookstoreServiceConsumer>\n    );\n  }\n};\n\nexport default withBookstoreService;","export const booksLoaded = (newBooks) => ({\n  type: 'FETCH_BOOKS_SUCCESS',\n  payload: newBooks,\n});\n\nexport const booksRequested = () => ({\n  type: 'FETCH_BOOKS_REQUEST',\n});\n\nexport const booksError = (error) => ({\n  type: 'FETCH_BOOKS_FAILURE',\n  payload: error,\n});\n\nexport const addBookToCart = (id) => ({\n  type: 'ADD_BOOK',\n  payload: id,\n});\n\nexport const decreaseBookQuantity = (id) => ({\n  type: 'DECREASE_BOOK_QUANTITY',\n  payload: id,\n});\nexport const removeBookFromCart = (id) => ({\n  type: 'REMOVE_BOOK',\n  payload: id,\n});\n\nexport const fetchBooks = (bookstoreService) => () => (dispatch) => {\n  dispatch(booksRequested());\n  bookstoreService.getBooks()\n    .then((data) => dispatch(booksLoaded(data)))\n    .catch((err) => dispatch(booksError(err)));\n};","import BookListItem from './book-list-item';\n\nexport default BookListItem;","import React from 'react';\n\nimport './book-list-item.css';\n\nconst BookListItem = ({ book, onAddToCart }) => {\n  const { title, author, price, coverImage } = book;\n  return (\n    <li className=\"col-md-6\">\n      <div className=\"book-list-item d-flex flex-column flex-md-row\">\n        <div className=\"book-cover\">\n          <img src={coverImage} alt=\"book cover\" />\n        </div>\n        <div className=\"book-details mt-2 d-flex flex-column justify-content-between align-items-start\">\n          <div className=\"book-title\">{title}</div>\n          <div className=\"book-author\">{author}</div>\n          <div className=\"book-price\">${price}</div>\n          <button\n            onClick={onAddToCart}\n            className=\"btn btn-info add-to-cart\">Add to cart</button>\n        </div>\n      </div>\n    </li>\n  );\n};\n\nexport default BookListItem;","import Spinner from './spinner';\n\nexport default Spinner;","import React from 'react';\n\nconst Spinner = () => {\n  return (\n    <div className=\"d-flex justify-content-center my-5\">\n      <div className=\"spinner-grow text-info\" role=\"status\">\n        <span className=\"sr-only\">Loading...</span>\n      </div>\n    </div>\n  );\n};\n\nexport default Spinner;","import React, { useEffect } from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport { withBookstoreService } from '../hoc';\nimport * as actions from '../../actions';\nimport { compose } from '../../utils';\nimport BookListItem from '../book-list-item';\nimport Spinner from '../spinner';\nimport ErrorIndicator from '../error-indicator';\n\nconst BookList = ({ books, onAddToCart }) => {\n  return (\n    <ul className=\"list-unstyled row\">\n      {books.map((book) => (\n        <BookListItem\n          key={book.id}\n          book={book}\n          onAddToCart={() => onAddToCart(book.id)}\n        />\n      ))}\n    </ul>\n  );\n};\n\nconst BookListContainer = (props) => {\n  const { books, loading, error, fetchBooks, onAddToCart } = props;\n\n  useEffect(() => {\n    fetchBooks();\n  }, [fetchBooks]);\n\n  if (loading) return <Spinner />;\n\n  if (error) return <ErrorIndicator fetchBooks={fetchBooks} />;\n\n  return <BookList books={books} onAddToCart={onAddToCart} />;\n};\n\nconst mapStateToProps = ({ booksList: { books, loading, error } }) => (\n  { books, loading, error }\n);\nconst actionCreators = (dispatch, { bookstoreService }) => bindActionCreators({\n  fetchBooks: actions.fetchBooks(bookstoreService),\n  onAddToCart: actions.addBookToCart,\n}, dispatch);\n\nexport default compose(\n  withBookstoreService(),\n  connect(mapStateToProps, actionCreators),\n)(BookListContainer);\n","import BookList from './book-list';\n\nexport default BookList;","export default (...functions) => (comp) => {\n  return functions.reduceRight(\n    (wrapped, func) => func(wrapped), comp\n  );\n};\n","import React from 'react';\n\nimport BookList from '../book-list';\n\nconst HomePage = () => {\n  return (\n    <div>\n      <BookList />\n    </div>\n  );\n};\n\nexport default HomePage;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport * as actions from '../../actions';\n\nconst ShoppingCartTable = (props) => {\n  const {\n    items,\n    total,\n    onIncrease,\n    onDecrease,\n    onDelete\n  } = props;\n\n  const renderRow = (item) => {\n    const { id, title, count, totalPrice } = item;\n    return (\n      <tr key={id}>\n        <td>\n          {title}\n          <div className=\"mt-2\">\n            <button\n              onClick={() => onDecrease(id)}\n              className=\"btn btn-outline-warning btn-sm\">\n              <i className=\"fa fa-minus-circle\" />\n            </button>\n            <button\n              onClick={() => onIncrease(id)}\n              className=\"btn btn-outline-success btn-sm ml-1\">\n              <i className=\"fa fa-plus-circle\" />\n            </button>\n            <button\n              onClick={() => onDelete(id)}\n              className=\"btn btn-outline-danger btn-sm ml-1\">\n              <i className=\"fa fa-trash-o\" />\n            </button>\n          </div>\n        </td>\n        <td className=\"text-center\">{count}</td>\n        <td className=\"text-center\">${totalPrice}</td>\n      </tr>\n    );\n  };\n\n  return (\n    <div className=\"shopping-cart-table table-responsive\">\n      <h2>Your Order</h2>\n      <table className=\"table\">\n        <thead>\n          <tr>\n            <th scope=\"col\">Item</th>\n            <th scope=\"col\" className=\"text-center\">Count</th>\n            <th scope=\"col\" className=\"text-center\">Price</th>\n          </tr>\n        </thead>\n\n        <tbody>\n          { items.map(renderRow) }\n        </tbody>\n      </table>\n\n      <div className=\"text-right h5 mr-2\">\n        Total: ${total}\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal } }) => ({\n  items: cartItems,\n  total: orderTotal,\n});\n\nconst createActions = {\n  onIncrease: actions.addBookToCart,\n  onDecrease: actions.decreaseBookQuantity,\n  onDelete: actions.removeBookFromCart,\n};\n\nexport default connect(mapStateToProps, createActions)(ShoppingCartTable);\n","import ShoppingCartTable from './shopping-cart-table';\n\nexport default ShoppingCartTable;\n","import React from 'react';\n\nimport ShoppingCartTable from '../shopping-cart-table';\n\nconst CartPage = () => {\n  return (\n    <div>\n      <ShoppingCartTable />\n    </div>\n  );\n};\n\nexport default CartPage;\n","import App from './app';\n\nexport default App;","import React from 'react';\nimport { HashRouter as Router, Route, Switch } from 'react-router-dom';\n\nimport MainHeader from '../main-header';\nimport { HomePage, CartPage } from '../pages';\n\nconst App = () => {\n  return (\n    <main role=\"main\" className=\"container\">\n      <Router basename='/'>\n        <MainHeader />\n        <Switch>\n          <Route exact path='/' component={HomePage}/>\n          <Route path='/cartpage' component={CartPage}/>\n        </Switch>\n      </Router>\n    </main>\n  );\n};\n\nexport default App;\n","const updateBooksList = (state, action) => {\n  if (!state) {\n    return {\n      books: [],\n      loading: true,\n      error: null,\n    };\n  }\n\n  switch (action.type) {\n    case 'FETCH_BOOKS_REQUEST':\n      return { books: [], loading: true, error: null };\n    case 'FETCH_BOOKS_SUCCESS':\n      return { books: action.payload, loading: false, error: null };\n    case 'FETCH_BOOKS_FAILURE':\n      return { books: [], loading: false, error: action.payload };\n    default:\n      return state.booksList;\n  }\n};\n\nexport default updateBooksList;","const updatedCartItems = (items, newItem, idx) => {\n  if (newItem.count === 0) {\n    return items.filter(({ id }) => id !== newItem.id);\n  }\n  if (idx < 0) {\n    return [...items, newItem];\n  }\n  return [\n    ...items.slice(0, idx),\n    newItem,\n    ...items.slice(idx + 1)\n  ];\n};\n\nconst updateCartItem = (item = {}, book, quantity) => {\n  const {\n    id = book.id,\n    title = book.title,\n    count = 0,\n    totalPrice = 0,\n  } = item;\n\n  return {\n    id,\n    title,\n    count: count + quantity,\n    totalPrice: totalPrice + (book.price * quantity),\n  };\n};\n\nconst updateOrder = (bookId, state, quantity) => {\n  const {\n    booksList: { books },\n    shoppingCart: { cartItems },\n  } = state;\n\n  const book = books.find(({ id }) => id === bookId);\n  const idx = cartItems.findIndex(({ id }) => id === bookId);\n  const item = cartItems[idx];\n\n  const newItem = updateCartItem(item, book, quantity);\n  const newCartItems = updatedCartItems(cartItems, newItem, idx);\n  const newOrderTotal = newCartItems.reduce((sum, item) => sum + item.totalPrice, 0);\n  const newItemsTotal = newCartItems.reduce((sum, item) => sum + item.count, 0);\n  return {\n    cartItems: newCartItems,\n    orderTotal: newOrderTotal,\n    itemsTotal: newItemsTotal,\n  };\n}\n\nconst updateShoppingCart = (state, action) => {\n  if (!state) {\n    return { cartItems: [], orderTotal: 0, itemsTotal: 0 };\n  }\n  switch (action.type) {\n    case 'ADD_BOOK':\n      return updateOrder(action.payload, state, 1);\n    case 'DECREASE_BOOK_QUANTITY':\n      return updateOrder(action.payload, state, -1);\n    case 'REMOVE_BOOK':\n      const item = state.shoppingCart.cartItems.find(({ id }) => id === action.payload);\n      return updateOrder(action.payload, state, -item.count);\n    default:\n      return state.shoppingCart;\n  }\n};\n\nexport default updateShoppingCart;","import updateBooksList from './bookslist';\nimport updateShoppingCart from './shopping-cart';\n\nconst reducer = (state, action) => {\n  return {\n    booksList: updateBooksList(state, action),\n    shoppingCart: updateShoppingCart(state, action),\n  };\n};\n\nexport default reducer;","import { createStore, applyMiddleware } from 'redux';\nimport thunkMiddleware from 'redux-thunk';\n\nimport reducer from './reducers';\n\nconst store = createStore(\n  reducer,\n  applyMiddleware(thunkMiddleware),\n);\n\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nimport ErrorBoundary from './components/error-boundary';\nimport BookstoreService from './services/bookstore-service';\nimport { BookstoreServiceProvider } from './components/bs-service-context';\n\nimport App from './components/app';\n\nimport store from './store';\n\nconst bookstoreService = new BookstoreService();\n\nReactDOM.render(\n  <Provider store={store}>\n    <ErrorBoundary>\n      <BookstoreServiceProvider value={bookstoreService}>\n        <Router>\n          <App />\n        </Router>\n      </BookstoreServiceProvider>\n    </ErrorBoundary>\n  </Provider>,\n  document.getElementById('root')\n);"],"sourceRoot":""}